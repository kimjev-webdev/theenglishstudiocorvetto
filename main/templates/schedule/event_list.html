{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container my-5">

<p class ="body-text navy mb-4"> Here you can manage classes and events for the schedule calendar.. 

<h3 class="mb-4 primaryfont red">Manage Classes</h2>
    <p class="navy body-text">This is the name of a class or special event that will eventually be displayed in the calendar. 
        <br>
    1. Add the event name in both English and Italian. 
    2. Choose a single emoji to represent the class.
    3. Click "Save" to add the class to the list below.
    4. You can edit or delete classes using the buttons in the Actions column - this will repopulate the form above, after which you can simply click "Save" to update the class.
    5. Classes are used to create events, so make sure to add all the classes you need before creating events.
    6. Continue to the Events section to create actual time slots for these classes.
    </p>

  <form id="class-form body-text navy" class="row g-3 mb-4">
    <input type="hidden" id="class-id">
    <div class="col-md-4">
      <label class="form-label primaryfont navy">Name (EN)</label>
      <input type="text" id="class-name-en" class="form-control body-text navy">
    </div>
    <div class="col-md-4">
      <label class="form-label primaryfont navy">Name (IT)</label>
      <input type="text" id="class-name-it" class="form-control body-text navy">
    </div>
    <div class="col-md-2">
      <label class="form-label primaryfont navy">Emoji</label>
      <input type="text" id="class-emoji" class="form-control body-text navy">
    </div>
    <div class="col-md-2">
      <label class="form-label">&nbsp;</label>
      <button type="submit" class="btn btn-red w-100">Save</button>
    </div>
  </form>

  <table class="table table-bordered primaryfont navy">
    <thead>
      <tr>
        <th class="primaryfont red">Emoji</th>
        <th class="primaryfont red">Name (EN)</th>
        <th class="primaryfont red">Name (IT)</th>
        <th class="primaryfont red">Actions</th>
      </tr>
    </thead>
    <tbody id="class-list">
      {% for cls in classes %}
      <tr data-id="{{ cls.id }}">
        <td>{{ cls.emoji }}</td>
        <td class="body-text navy">{{ cls.name_en }}</td>
        <td class="body-text navy">{{ cls.name_it }}</td>
        <td>
          <button class="btn btn-sm btn-navy" onclick="editClass('{{ cls.id }}')">Edit</button>
          <button class="btn btn-sm btn-red" onclick="deleteClass('{{ cls.id }}')">Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
     <hr class="my-5">
  
    <h2 class="mb-4 primaryfont red">ðŸ“… Manage Events</h2>

  <button class="btn btn-red mb-3" onclick="toggleEventForm()">âž• Add Event</button>
  <form id="event-form body-text navy" class="row g-3 mb-4 d-none">
    <input type="hidden" id="event-id">
    <div class="col-md-3">
      <label class="form-label primaryfont navy">Class</label>
      <select id="event-class" class="form-select body-text navy">
        {% for cls in classes %}
          <option value="{{ cls.id }}">{{ cls }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-2">
      <label class="form-label body-text navy">Date</label>
      <input type="date" id="event-date" class="form-control">
    </div>
    <div class="col-md-2">
      <label class="form-label body-text navy">Start</label>
      <input type="time" id="event-start" class="form-control">
    </div>
    <div class="col-md-2">
      <label class="form-label body-text navy">End</label>
      <input type="time" id="event-end" class="form-control">
    </div>
    <div class="col-md-2">
      <label class="form-label">Recurrence</label>
      <select id="event-recurrence" class="form-select">
        <option value="none">None</option>
        <option value="weekly">Weekly</option>
        <option value="biweekly">Biweekly</option>
        <option value="monthly">Monthly</option>
        <option value="custom_days">Custom Days</option>
      </select>
    </div>
    <div class="col-md-1">
      <label class="form-label">Days</label>
      <input type="text" id="event-days" class="form-control" placeholder="Mon,Wed">
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-success">Save</button>
    </div>
  </form>

  <table class="table table-bordered body-text navy">
    <thead>
      <tr>
        <th>Class</th>
        <th>Date</th>
        <th>Start</th>
        <th>End</th>
        <th>Repeat</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="event-list">
      {% for event in events %}
      <tr data-id="{{ event.id }}">
        <td>{{ event.class_instance }}</td>
        <td>{{ event.date }}</td>
        <td>{{ event.start_time }}</td>
        <td>{{ event.end_time }}</td>
        <td>{{ event.recurrence }}</td>
        <td>
          <button class="btn btn-sm btn-red" onclick="editEvent('{{ event.id }}')">Edit</button>
          <button class="btn btn-sm btn-red" onclick="deleteEvent('{{ event.id }}')">Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

<script src="{% static 'js/schedule.js' %}"></script>
"></script>
{% endblock %}
