{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load i18n calendar_extras %}


{% block title %}Classes & Events{% endblock %}

{% block content %}
<main>
  <h1 class="navy primaryfont text-center">SCHEDULE</h1>
  
  {% if not events %}
  {% endif %}

<h2 class="red primaryfont text-center">{{ month }}</h2>

 <div class="calendar-grid">
  <div class="weekday navy-bg off-white primaryfont">{% trans "Mon" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Tue" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Wed" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Thu" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Fri" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Sat" %}</div>
  <div class="weekday navy-bg off-white primaryfont">{% trans "Sun" %}</div>

  {% for week in weeks %}
    {% for day in week %}
      <div class="day{% if day.month != month %} other-month{% endif %}">
        <div class="date red primaryfont">{{ day.day }}</div>
        {% for event in events_by_day|get_item:day %}
          <div class="emoji"
     data-tippy-content="{{ '<div class=\'tippy-content\'>' }}{% if LANGUAGE_CODE == 'it' %}{{ event.class_instance.name_it }}{% else %}{{ event.class_instance.name_en }}{% endif %}{{ '<br>' }}{{ event.start_time }}â€“{{ event.end_time }}{{ '</div>' | safe }}">
  {{ event.class_instance.emoji }}
 </div>

        {% endfor %}
      </div>
    {% endfor %}
  {% endfor %}
</div>

 <nav class="d-flex justify-content-center align-items-center mt-4">
  <p class="navy primaryfont fs-4">
    <a href="{% url 'calendar_by_date' prev_year prev_month %}" class="fs-3 red primaryfont">&lt;</a>
    MONTH
    <a href="{% url 'calendar_by_date' next_year next_month %}" class="fs-3 red primaryfont">&gt;</a>
    </p>
  </nav>

  <br>
  <p class="navy body-text">To explore what's happening at <b class="red">The English Studio</b> simply tap or click any emoji on the calendar.</p>
  <p class="navy body-text">We host regular group sessions as well as one-off event's on special dates throughout the year; from seasonal celebrations to creative workshops. Be sure to check back often, as new events are added regularly. Business English, IELTS test preperation and private lessons can be arranged on an individual basis, tailored to suit you.</p>
<p class="red body-text"><b>Ready to join an event?</b></p>
<p class="navy body-text">Use the form on our contact page to book your spot. We are happy to help with anything from bookings to general enquiries. 

 <div class="text-center headertext mt-4">
      <a href="{% url 'contact' %}" class="btn btn-red primaryfont">{% trans "BOOK NOW" %}</a>
    </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    tippy('.emoji', {
      placement: 'top',
      animation: 'fade',
      arrow: true,
      delay: [100, 100],
      allowHTML: true,
      maxWidth: 240,
      appendTo: () => document.body, // avoids layout issues
      theme: 'custom', // custom class for styling
    });
  });
</script>
{% endblock %}
