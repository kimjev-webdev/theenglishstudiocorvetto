{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">{% trans "Manage Flyers" %}</h2>
    <div>
      <a href="{% url 'portal:flyers_reorder' %}" class="btn btn-outline-secondary me-2">{% trans "Reorder" %}</a>
      <a href="{% url 'portal:flyer_create' %}" class="btn btn-primary">{% trans "New Flyer" %}</a>
    </div>
  </div>

  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th style="width:90px;">{% trans "Preview" %}</th>
        <th>{% trans "Title" %}</th>
        <th>{% trans "Event date" %}</th>
        <th>{% trans "Order" %}</th>
        <th class="text-end">{% trans "Actions" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for flyer in flyers %}
      <tr>
        <td>
          {% if flyer.image %}
            <img src="{{ flyer.image.url }}" alt="" style="height:60px;width:auto;border-radius:4px;">
          {% else %}
            <span class="text-muted">â€”</span>
          {% endif %}
        </td>
        <td>{{ flyer.title_en|default:flyer.title_it }}</td>
        <td>
          {% if flyer.event_date %}
            {{ flyer.event_date|date:"Y-m-d" }}
          {% else %}
            <span class="text-muted">â€”</span>
          {% endif %}
        </td>
        <td>
          {% if flyer.sort_order %}
            {{ flyer.sort_order }}
          {% else %}
            <span class="text-muted">0</span>
          {% endif %}
        </td>
        <td class="text-end">
          <a href="{% url 'portal:flyer_update' flyer.pk %}" class="btn btn-sm btn-warning">{% trans "Edit" %}</a>
          <a href="{% url 'portal:flyer_delete' flyer.pk %}" class="btn btn-sm btn-danger">{% trans "Delete" %}</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center text-muted py-4">
          {% trans "No flyers yet." %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

   <a href="{% url 'portal:portal_dashboard' %}" class="btn btn-red">GO BACK</a>
</div>
{% endblock %}
