{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load i18n calendar_extras %}

{% block title %}Classes & Events{% endblock %}

{% block content %}
  <h1 class="navy primaryfont text-center">{% trans "Schedule" %}</h1>
  <h2 class="red primaryfont text-center">{{ month }}</h2>
  <br>

  <p class="navy body-text">
    {% blocktrans %}To explore what's happening at <b class="red">The English Studio</b> simply hover or tap any emoji on the calendar.{% endblocktrans %}
  </p>
  <p class="navy body-text">
    {% trans "We host regular group sessions as well as one-off event's on special dates throughout the year; from seasonal celebrations to creative workshops. Be sure to check back often, as new events are added regularly. Business English, IELTS test preperation and private lessons can be arranged on an individual basis, tailored to suit you." %}
  </p>
  <p class="red body-text"><b>{% trans "Ready to join an event?" %}</b></p>
  <p class="navy body-text">
    {% trans "Use the form on our contact page to book your spot. We are happy to help with anything from bookings to general enquiries." %}
  </p>

<div class="calendar-grid" role="grid" aria-label="{% trans 'Monthly schedule' %}">
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Monday' %}">{% trans "Mon" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Tuesday' %}">{% trans "Tue" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Wednesday' %}">{% trans "Wed" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Thursday' %}">{% trans "Thu" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Friday' %}">{% trans "Fri" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Saturday' %}">{% trans "Sat" %}</div>
  <div class="weekday navy-bg off-white primaryfont" role="columnheader" aria-label="{% trans 'Sunday' %}">{% trans "Sun" %}</div>

  {% for week in weeks %}
    <div class="week" role="row">
      {% for day in week %}
        {% with day_events=events_by_day|get_item:day %}
          <div
            class="day{% if day.month != month_number %} other-month{% endif %}"
            role="gridcell"
            {% if day_events %}
              data-tippy-content="
                {% for event in day_events %}
                  {% if LANGUAGE_CODE == 'it' %}
                    {{ event.class_instance.name_it }}
                  {% else %}
                    {{ event.class_instance.name_en }}
                  {% endif %}
                  ({{ event.start_time }}–{{ event.end_time }})<br>
                {% endfor %}
              "
            {% endif %}
            aria-label="{{ day|date:'Y-m-d' }}"
          >
            <div class="date red primaryfont">{{ day.day }}</div>
            <div class="emoji-wrapper" aria-hidden="true">
              {% for event in day_events %}
                <div class="emoji">{{ event.class_instance.emoji }}</div>
              {% endfor %}
            </div>
            {% if day_events %}
              <span class="visually-hidden">
                {% for event in day_events %}
                  {% if LANGUAGE_CODE == 'it' %}
                    {{ event.class_instance.name_it }}
                  {% else %}
                    {{ event.class_instance.name_en }}
                  {% endif %}
                  ({{ event.start_time }}–{{ event.end_time }}){% if not forloop.last %}; {% endif %}
                {% endfor %}
              </span>
            {% endif %}
          </div>
        {% endwith %}
      {% endfor %}
    </div>
  {% endfor %}
</div>

  <nav class="d-flex justify-content-center align-items-center mt-4">
    <p class="navy primaryfont fs-4">
      <a href="{% url 'calendar_by_date' prev_year prev_month %}" class="fs-3 red primaryfont">&lt;</a>
      {% trans "MONTH" %}
      <a href="{% url 'calendar_by_date' next_year next_month %}" class="fs-3 red primaryfont">&gt;</a>
    </p>
  </nav>

  <div class="headertext text-center">
    <a href="{% url 'contact' %}" class="btn btn-red primaryfont">{% trans "BOOK NOW" %}</a>
  </div>

 <script src="{% static 'js/calendar.js' %}"></script>
{% endblock %}
